<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Трекер ЕГЭ Информатика 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .checkbox-wrapper input:checked + div {
            background-color: #10b981;
            border-color: #10b981;
        }
        .checkbox-wrapper input:checked + div svg {
            display: block;
        }
        .card-transition {
            transition: all 0.2s ease-in-out;
        }
        .card-transition:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="pb-32 sm:pb-24"> <!-- Added padding bottom for mobile footer safety -->

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-20">
        <div class="max-w-5xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <div class="bg-blue-600 text-white p-2 rounded-lg">
                    <i class="fas fa-laptop-code text-xl"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-gray-800 leading-tight">ЕГЭ Информатика</h1>
                    <p class="text-xs text-gray-500">Чек-лист заданий 2026</p>
                </div>
            </div>
            <div class="text-right hidden sm:block">
                <button onclick="resetProgress()" class="text-sm text-red-500 hover:text-red-700 transition">
                    <i class="fas fa-trash-alt mr-1"></i> Сбросить
                </button>
            </div>
        </div>
        <!-- Progress Bar -->
        <div class="h-1.5 w-full bg-gray-200">
            <div id="progressBar" class="h-full bg-blue-600 transition-all duration-500" style="width: 0%"></div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-5xl mx-auto px-4 py-8">
        
        <!-- Stats Summary -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
            <div class="bg-white p-4 rounded-xl shadow-sm border-l-4 border-blue-500">
                <div class="text-gray-500 text-xs uppercase font-semibold">Всего заданий</div>
                <div class="text-2xl font-bold text-gray-800">27</div>
            </div>
            <div class="bg-white p-4 rounded-xl shadow-sm border-l-4 border-green-500">
                <div class="text-gray-500 text-xs uppercase font-semibold">Базовый уровень</div>
                <div class="text-2xl font-bold text-gray-800">11</div>
            </div>
            <div class="bg-white p-4 rounded-xl shadow-sm border-l-4 border-yellow-500">
                <div class="text-gray-500 text-xs uppercase font-semibold">Повышенный</div>
                <div class="text-2xl font-bold text-gray-800">11</div>
            </div>
            <div class="bg-white p-4 rounded-xl shadow-sm border-l-4 border-red-500">
                <div class="text-gray-500 text-xs uppercase font-semibold">Высокий</div>
                <div class="text-2xl font-bold text-gray-800">5</div>
            </div>
        </div>

        <!-- Filters -->
        <div class="flex flex-wrap gap-2 mb-6">
            <button onclick="filterTasks('all')" class="px-4 py-2 rounded-full bg-gray-800 text-white text-sm font-medium hover:bg-gray-700 transition shadow-md filter-btn" data-filter="all">Все</button>
            <button onclick="filterTasks('uncompleted')" class="px-4 py-2 rounded-full bg-white text-gray-600 text-sm font-medium hover:bg-gray-100 transition shadow-sm border border-gray-200 filter-btn" data-filter="uncompleted">Не выполнено</button>
            <button onclick="filterTasks('base')" class="px-4 py-2 rounded-full bg-green-100 text-green-700 text-sm font-medium hover:bg-green-200 transition filter-btn" data-filter="base">Базовые</button>
			<button onclick="filterTasks('increased')" class="px-4 py-2 rounded-full bg-yellow-100 text-yellow-700 text-sm font-medium hover:bg-yellow-200 transition filter-btn" data-filter="increased">Повышенные</button>
            <button onclick="filterTasks('high')" class="px-4 py-2 rounded-full bg-red-100 text-red-700 text-sm font-medium hover:bg-red-200 transition filter-btn" data-filter="high">Сложные</button>
        </div>

        <!-- Task Grid -->
        <div id="taskGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5">
            <!-- Tasks will be injected here by JS -->
        </div>

    </main>

    <!-- Sticky Footer for Score -->
    <div class="fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 shadow-lg p-4 z-30 transform transition-transform duration-300" id="scoreFooter">
        <div class="max-w-5xl mx-auto flex justify-between items-center">
            <div class="flex flex-col sm:flex-row sm:items-center gap-4">
                
                <!-- Primary Score -->
                <div>
                    <div class="text-xs text-gray-500 font-medium uppercase">Первичные</div>
                    <div class="flex items-baseline space-x-1">
                        <span id="currentScore" class="text-3xl font-bold text-blue-600">0</span>
                        <span class="text-gray-400 font-medium text-sm">/ <span id="maxScore">29</span></span>
                    </div>
                </div>

                <!-- Divider (Hidden on mobile) -->
                <div class="hidden sm:block h-8 w-px bg-gray-300"></div>

                <!-- Secondary Score (New) -->
                <div>
                    <div class="text-xs text-gray-500 font-medium uppercase">Вторичные</div>
                    <div class="flex items-baseline space-x-1">
                        <span id="secondaryScore" class="text-3xl font-bold text-gray-800">0</span>
                        <span class="text-gray-400 font-medium text-sm">/ 100</span>
                    </div>
                </div>

            </div>

            <div class="text-right">
                 <div id="percentage" class="text-2xl font-bold text-gray-800">0%</div>
                 <div class="text-xs text-gray-500">готовность</div>
            </div>
        </div>
    </div>

    <script>
        // Data structure for EGE Informatics tasks (Updated structure for 2026)
        // Max primary score is typically 29 based on recent years.
        
        const tasks = [
            { id: 1, title: "Анализ графов", desc: "Сопоставление графа и таблицы", difficulty: "Базовый", points: 1, time: "3 мин" },
            { id: 2, title: "Таблицы истинности", desc: "Логические функции, построение таблиц", difficulty: "Базовый", points: 1, time: "3 мин" },
            { id: 3, title: "Базы данных", desc: "Поиск информации в реляционных БД (Excel)", difficulty: "Базовый", points: 1, time: "3 мин" },
            { id: 4, title: "Кодирование информации", desc: "Условие Фано, двоичные коды", difficulty: "Базовый", points: 1, time: "2 мин" },
            { id: 5, title: "Алгоритмы", desc: "Анализ и построение алгоритмов (автоматы)", difficulty: "Базовый", points: 1, time: "4 мин" },
            { id: 6, title: "Циклы. Черепаха", desc: "Анализ работы программы (Кумир/Python)", difficulty: "Базовый", points: 1, time: "4 мин" },
            { id: 7, title: "Кодирование изображений/звука", desc: "Объем памяти, разрешение, частота", difficulty: "Базовый", points: 1, time: "5 мин" },
            { id: 8, title: "Комбинаторика", desc: "Системы счисления, подсчет вариантов", difficulty: "Базовый", points: 1, time: "4 мин" },
            { id: 9, title: "Обработка таблиц (Excel)", desc: "Условия в электронных таблицах", difficulty: "Базовый", points: 1, time: "6 мин" },
            { id: 10, title: "Поиск в тексте", desc: "Поиск слов в Word/текстовом редакторе", difficulty: "Базовый", points: 1, time: "2 мин" },
            { id: 11, title: "Количество информации", desc: "Пароли, идентификаторы, объемы памяти", difficulty: "Базовый", points: 1, time: "3 мин" },
            { id: 12, title: "Исполнители", desc: "Алгоритмы для исполнителей (Редактор)", difficulty: "Повышенный", points: 1, time: "4 мин" },
            { id: 13, title: "IP-адресация", desc: "Маски подсети, количество адресов", difficulty: "Базовый", points: 1, time: "3 мин" },
            { id: 14, title: "Системы счисления", desc: "Арифметика в разных системах", difficulty: "Базовый", points: 1, time: "3 мин" },
            { id: 15, title: "Логика и множества", desc: "Истинность логических выражений (Дел, Отрезки)", difficulty: "Повышенный", points: 1, time: "5 мин" },
            { id: 16, title: "Рекурсия", desc: "Вычисление значений рекурсивных функций", difficulty: "Базовый", points: 1, time: "3 мин" },
            { id: 17, title: "Обработка массивов", desc: "Перебор чисел, делимость (файл)", difficulty: "Повышенный", points: 1, time: "10 мин" },
            { id: 18, title: "Динамическое программирование", desc: "Робот в лабиринте (Excel/Прога)", difficulty: "Повышенный", points: 1, time: "8 мин" },
            { id: 19, title: "Теория игр (1 ход)", desc: "Выигрышная стратегия", difficulty: "Повышенный", points: 1, time: "5 мин" },
            { id: 20, title: "Теория игр (2 хода)", desc: "Выигрыш за 2 хода", difficulty: "Повышенный", points: 1, time: "6 мин" },
            { id: 21, title: "Теория игр (3 хода)", desc: "Анализ игры, проигрыш/выигрыш", difficulty: "Высокий", points: 1, time: "7 мин" },
            { id: 22, title: "Многопроцессорность", desc: "Время выполнения процессов (Excel)", difficulty: "Повышенный", points: 1, time: "7 мин" },
            { id: 23, title: "Динамика (исполнитель)", desc: "Количество программ преобразования", difficulty: "Повышенный", points: 1, time: "5 мин" },
            { id: 24, title: "Обработка строк", desc: "Текстовый файл, поиск цепочек", difficulty: "Высокий", points: 1, time: "15 мин" },
            { id: 25, title: "Теория чисел", desc: "Делители, маски чисел", difficulty: "Высокий", points: 1, time: "15 мин" },
            { id: 26, title: "Сортировка", desc: "Жадные алгоритмы, обработка архива", difficulty: "Высокий", points: 2, time: "20 мин" },
            { id: 27, title: "Анализ данных", desc: "Эффективные алгоритмы (перебор/динамика)", difficulty: "Высокий", points: 2, time: "35 мин" }
        ];

        // Approximation of 2024/2025 scale for 29 max points
        const secondaryScoreMap = {
            0: 0, 1: 6, 2: 11, 3: 17, 4: 22, 5: 28,
            6: 34, 7: 40, 8: 46, 9: 51, 10: 57,
            11: 62, 12: 68, 13: 70, 14: 72, 15: 75,
            16: 78, 17: 80, 18: 83, 19: 85, 20: 88,
            21: 90, 22: 93, 23: 95, 24: 98, 25: 99, // Note: 24/25 high range is tight
            26: 100, 27: 100, 28: 100, 29: 100 
            // Correction for standard scale distribution:
            // Usually: 29->100, 28->98, 27->95, 26->93, 25->90... let's use a more standard recent scale
        };
        
        // Improved Mapping Array (Index = Primary Score)
        const secondaryScores = [
            0, 6, 11, 17, 22, 28, 34, 40, 46, 51, 
            57, 62, 68, 70, 72, 75, 78, 80, 83, 85, 
            88, 90, 93, 95, 98, 100, 100, 100, 100, 100 // Cap at 100 if math goes weird, but standard scale usually maps 29->100.
            // Let's use the strict mapping:
            // 29=100, 28=98, 27=95, 26=93, 25=90, 24=88, 23=85, 22=83, 21=80...
        ];
        
        // Re-defining strict mapping for accuracy
        const strictMapping = [
             0,  6, 11, 17, 22, 28, 34, 40, 46, 51, // 0-9
            57, 62, 68, 70, 72, 75, 78, 80, 83, 85, // 10-19
            88, 90, 93, 95, 98, 100, 100, 100, 100, 100 // 20-29 (25->90 in some years, 98 in others? Let's stick to recent trend: 29->100)
        ];

        const maxPoints = tasks.reduce((acc, task) => acc + task.points, 0);
        document.getElementById('maxScore').textContent = maxPoints;

        // Load saved state
        let savedState = JSON.parse(localStorage.getItem('egeTrackerState')) || {};

        function getDifficultyColor(diff) {
            switch(diff) {
                case 'Базовый': return 'bg-green-100 text-green-800 border-green-200';
                case 'Повышенный': return 'bg-yellow-100 text-yellow-800 border-yellow-200';
                case 'Высокий': return 'bg-red-100 text-red-800 border-red-200';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        function renderTasks(filterType = 'all') {
            const grid = document.getElementById('taskGrid');
            grid.innerHTML = '';

            tasks.forEach(task => {
                const isChecked = savedState[task.id] ? 'checked' : '';
                
                // Filtering Logic
                if (filterType === 'uncompleted' && isChecked) return;
                if (filterType === 'base' && task.difficulty !== 'Базовый') return;
				if (filterType === 'increased' && task.difficulty !== 'Повышенный') return;
                if (filterType === 'high' && task.difficulty !== 'Высокий') return;

                const diffClass = getDifficultyColor(task.difficulty);
                // Special button for Task 6
                let extraAction = '';
                if (task.id === 6) {
                    extraAction = `
                        <a href="https://aflunn.github.io/Number6EGE/" target="_blank" class="text-xs font-medium text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 px-3 py-1.5 rounded-lg transition-colors flex items-center ml-2">
                            <i class="fas fa-external-link-alt mr-1.5"></i>Подробнее
                        </a>
                    `;
                }

                const cardHTML = `
                    <div class="bg-white rounded-xl p-5 shadow-sm border border-gray-100 relative overflow-hidden card-transition group flex flex-col">
                        <div class="absolute top-0 left-0 w-1 h-full ${task.difficulty === 'Высокий' ? 'bg-red-500' : (task.difficulty === 'Повышенный' ? 'bg-yellow-500' : 'bg-green-500')}"></div>
                        
                        <div class="flex justify-between items-start mb-3 pl-3">
                            <div class="flex items-center gap-2">
                                <span class="flex items-center justify-center w-8 h-8 rounded-full bg-gray-800 text-white font-bold text-sm">
                                    ${task.id}
                                </span>
                                <span class="px-2 py-1 rounded text-xs font-semibold border ${diffClass}">
                                    ${task.difficulty}
                                </span>
                            </div>
                            <div class="text-right">
                                <span class="block text-sm font-bold text-blue-600">${task.points} ${task.points === 1 ? 'балл' : 'балла'}</span>
                                <span class="block text-xs text-gray-400">~${task.time}</span>
                            </div>
                        </div>

                        <h3 class="text-lg font-bold text-gray-800 mb-1 pl-3 leading-snug">${task.title}</h3>
                        <p class="text-sm text-gray-500 mb-4 pl-3 h-10 overflow-hidden">${task.desc}</p>

                        <div class="pl-3 mt-auto pt-3 border-t border-gray-100 flex justify-between items-center">
                            <label class="checkbox-wrapper flex items-center cursor-pointer select-none group-hover:opacity-100">
                                <input type="checkbox" class="sr-only" id="task-${task.id}" onchange="toggleTask(${task.id})" ${isChecked}>
                                <div class="w-6 h-6 border-2 border-gray-300 rounded-md mr-2 flex items-center justify-center transition-colors duration-200 bg-white">
                                    <svg class="w-4 h-4 text-white fill-current hidden pointer-events-none" viewBox="0 0 20 20"><path d="M0 11l2-2 5 5L18 3l2 2L7 18z"/></svg>
                                </div>
                                <span class="text-sm font-medium text-gray-600 group-hover:text-gray-900 transition-colors">Выполнено</span>
                            </label>
							${extraAction}
                        </div>
                    </div>
                `;
                grid.insertAdjacentHTML('beforeend', cardHTML);
            });

            if (grid.innerHTML === '') {
                grid.innerHTML = `<div class="col-span-full text-center py-10 text-gray-400">Нет заданий, соответствующих фильтру.</div>`;
            }
        }

        function toggleTask(id) {
            const checkbox = document.getElementById(`task-${id}`);
            if (checkbox.checked) {
                savedState[id] = true;
            } else {
                delete savedState[id];
            }
            localStorage.setItem('egeTrackerState', JSON.stringify(savedState));
            calculateScore();
        }

        function calculateScore() {
            let currentPoints = 0;
            let completedCount = 0;

            tasks.forEach(task => {
                if (savedState[task.id]) {
                    currentPoints += task.points;
                    completedCount++;
                }
            });

            // Update UI
            const scoreEl = document.getElementById('currentScore');
            const secScoreEl = document.getElementById('secondaryScore');
            const percentageEl = document.getElementById('percentage');
            const progressBar = document.getElementById('progressBar');

            // 1. Primary Score
            scoreEl.textContent = currentPoints;

            // 2. Secondary Score (Mapped)
            // Safe access: if points > 29, cap at 100.
            const secScore = strictMapping[currentPoints] !== undefined ? strictMapping[currentPoints] : 100;
            secScoreEl.textContent = secScore;
            
            // 3. Visuals
            const percent = Math.round((currentPoints / maxPoints) * 100);
            percentageEl.textContent = `${percent}%`;
            progressBar.style.width = `${percent}%`;

            // Color change for percentage
            if(percent < 30) percentageEl.className = "text-2xl font-bold text-red-500";
            else if(percent < 70) percentageEl.className = "text-2xl font-bold text-yellow-600";
            else percentageEl.className = "text-2xl font-bold text-green-600";
        }

        function filterTasks(type) {
            // Visual toggle of buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if(btn.dataset.filter === type) {
                    btn.classList.remove('bg-white', 'text-gray-600');
                    btn.classList.add('bg-gray-800', 'text-white');
                } else {
                    btn.classList.add('bg-white', 'text-gray-600');
                    btn.classList.remove('bg-gray-800', 'text-white');
                    // Reset specific colors if they were active
                     if(btn.dataset.filter === 'base') btn.className = "px-4 py-2 rounded-full bg-green-100 text-green-700 text-sm font-medium hover:bg-green-200 transition filter-btn";
                     if(btn.dataset.filter === 'high') btn.className = "px-4 py-2 rounded-full bg-red-100 text-red-700 text-sm font-medium hover:bg-red-200 transition filter-btn";
                }
            });
            
            renderTasks(type);
        }

        function resetProgress() {
            if(confirm('Вы уверены, что хотите сбросить весь прогресс?')) {
                savedState = {};
                localStorage.removeItem('egeTrackerState');
                renderTasks();
                calculateScore();
            }
        }

        // Initialize
        renderTasks();
        calculateScore();

    </script>
</body>
</html>
